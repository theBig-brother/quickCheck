MainActivity.kt:ä»£ç ï¼š



```
kotlinå¤åˆ¶ç¼–è¾‘var showSplash by remember { mutableStateOf(true) } // å®šä¹‰çŠ¶æ€æ§åˆ¶æ˜¯å¦æ˜¾ç¤º Splash å±å¹•
LaunchedEffect(Unit) {
    kotlinx.coroutines.delay(2000) // å»¶è¿Ÿ 2 ç§’
    showSplash = false // 2 ç§’ååˆ‡æ¢çŠ¶æ€ï¼Œéšè— Splash å±å¹•
}
```

------

### è¯¦ç»†è§£æï¼š

#### 1ï¸âƒ£ **`var showSplash by remember { mutableStateOf(true) }`**

- è¿™ä¸ªå˜é‡ **`showSplash`** æ˜¯ä¸€ä¸ª **çŠ¶æ€å˜é‡**ï¼ˆStateï¼‰ï¼Œç”¨äºæ§åˆ¶æ˜¯å¦æ˜¾ç¤ºå¯åŠ¨ç•Œé¢ï¼ˆSplash Screenï¼‰ã€‚
- `mutableStateOf(true)` è¡¨ç¤º `showSplash` åˆå§‹å€¼ä¸º `true`ï¼Œå³ **åº”ç”¨å¯åŠ¨æ—¶ä¼šæ˜¾ç¤ºå¯åŠ¨ç”»é¢**ã€‚
- `remember {}` çš„ä½œç”¨æ˜¯ **åœ¨ Composable é‡æ–°ç»„åˆï¼ˆRecompositionï¼‰æ—¶ä¿æŒè¿™ä¸ªçŠ¶æ€çš„å€¼**ï¼Œé¿å…å®ƒè¢«é‡ç½®ã€‚

ğŸ“Œ **ç­‰æ•ˆå†™æ³•ï¼ˆä½¿ç”¨ `var` å’Œ `remember` åˆ†å¼€å†™ï¼‰ï¼š**

```
kotlinå¤åˆ¶ç¼–è¾‘val showSplashState = remember { mutableStateOf(true) }
var showSplash by showSplashState
```

è¿™é‡Œ `mutableStateOf(true)` åˆ›å»ºäº†ä¸€ä¸ªå¯å˜çš„çŠ¶æ€å¯¹è±¡ï¼Œè€Œ `by` å§”æ‰˜ï¼ˆdelegateï¼‰å…è®¸æˆ‘ä»¬ç›´æ¥ä½¿ç”¨ `showSplash` è®¿é—®å®ƒçš„å€¼ã€‚

------

#### 2ï¸âƒ£ **`LaunchedEffect(Unit) { ... }`**

```
kotlinå¤åˆ¶ç¼–è¾‘LaunchedEffect(Unit) {
    kotlinx.coroutines.delay(2000) // å»¶è¿Ÿ 2 ç§’
    showSplash = false // 2 ç§’ååˆ‡æ¢çŠ¶æ€ï¼Œéšè— Splash å±å¹•
}
```

- `LaunchedEffect(Unit)` æ˜¯ **Jetpack Compose çš„å‰¯ä½œç”¨ï¼ˆSide Effectï¼‰API**ï¼Œå®ƒçš„ä½œç”¨æ˜¯ **åœ¨ Composable é¦–æ¬¡å¯åŠ¨æ—¶æ‰§è¡ŒæŸäº›å¼‚æ­¥ä»»åŠ¡**ã€‚
- `LaunchedEffect` åªä¼šåœ¨ **ä¼ å…¥çš„é”®ï¼ˆKeyï¼‰** å˜åŒ–æ—¶é‡æ–°æ‰§è¡Œã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä¼ å…¥ `Unit`ï¼Œè¡¨ç¤º **ä»…æ‰§è¡Œä¸€æ¬¡**ï¼Œä¸ä¼šå› ä¸º `Recomposition` é‡æ–°è¿è¡Œã€‚

ğŸ“Œ **å¦‚æœä¸åŠ  `Unit`ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ** å¦‚æœ `LaunchedEffect` ä¾èµ–æŸä¸ªå¯å˜çŠ¶æ€å˜é‡ï¼Œä¾‹å¦‚ `showSplash`ï¼Œé‚£ä¹ˆæ¯æ¬¡ `showSplash` å˜åŒ–æ—¶ï¼Œå®ƒéƒ½ä¼šé‡æ–°æ‰§è¡Œï¼Œè¿™ä¼šå¯¼è‡´**æ— é™å¾ªç¯**ã€‚

------

#### 3ï¸âƒ£ **`kotlinx.coroutines.delay(2000)`**

- è¿™é‡Œä½¿ç”¨äº† `kotlinx.coroutines.delay(2000)` è¿›è¡Œ **éé˜»å¡å»¶è¿Ÿ 2 ç§’**ã€‚
- ä¸ºä»€ä¹ˆæ˜¯ `delay` è€Œä¸æ˜¯ `Thread.sleep(2000)`ï¼Ÿ
  - `delay(2000)` **ä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹**ï¼Œå®ƒä¼šè®©å½“å‰ `Coroutine` æŒ‚èµ· 2 ç§’åå†ç»§ç»­æ‰§è¡Œã€‚
  - `Thread.sleep(2000)` **ä¼šé˜»å¡ UI çº¿ç¨‹**ï¼Œå¯¼è‡´ç•Œé¢æ— å“åº”ï¼Œå½±å“ç”¨æˆ·ä½“éªŒã€‚

------

#### 4ï¸âƒ£ **`showSplash = false`**

- 2 ç§’åï¼Œ`showSplash` è¢«è®¾ç½®ä¸º `false`ï¼Œè¿™ä¼šè§¦å‘ `Composable` **é‡æ–°ç»„åˆï¼ˆRecompositionï¼‰**ã€‚
- ç”±äº `if (showSplash)` æ§åˆ¶ç•Œé¢æ˜¾ç¤ºé€»è¾‘ï¼Œå½“ `showSplash` å˜æˆ `false`ï¼Œ`SplashScreen()` ç»„ä»¶å°±ä¼šè¢«ç§»é™¤ï¼Œè½¬è€Œæ˜¾ç¤ºä¸»ç•Œé¢ã€‚

------

### **æ€»ç»“**

ğŸš€ **è¿™æ®µä»£ç çš„ä½œç”¨æ˜¯ï¼š**

1. `showSplash` å˜é‡æ§åˆ¶æ˜¯å¦æ˜¾ç¤ºå¯åŠ¨ç”»é¢ï¼Œåˆå§‹å€¼ä¸º `true`ï¼ˆæ˜¾ç¤ºï¼‰ã€‚

2. ```
   LaunchedEffect(Unit)
   ```

    ç¡®ä¿ä»¥ä¸‹ä»£ç  

   åªè¿è¡Œä¸€æ¬¡

   ï¼š

   - **å»¶è¿Ÿ 2 ç§’**ï¼ˆ`delay(2000)`ï¼‰ã€‚
   - **ä¿®æ”¹çŠ¶æ€** `showSplash = false`ï¼Œè§¦å‘ç•Œé¢æ›´æ–°ã€‚

3. 2 ç§’åï¼Œå¯åŠ¨ç•Œé¢ **éšè—**ï¼Œåº”ç”¨è¿›å…¥ä¸»ç•Œé¢ã€‚

------

### **è¡¥å……ï¼šä¸ºä»€ä¹ˆä¸ç”¨ `rememberCoroutineScope()` ä»£æ›¿ `LaunchedEffect`ï¼Ÿ**

å¦ä¸€ç§æ–¹å¼æ˜¯ä½¿ç”¨ `rememberCoroutineScope()` å¯åŠ¨ `Coroutine`ï¼š

```
kotlinå¤åˆ¶ç¼–è¾‘val coroutineScope = rememberCoroutineScope()
coroutineScope.launch {
    delay(2000)
    showSplash = false
}
```

ä½†è¿™é‡Œä¸æ¨èè¿™ä¹ˆåšï¼Œå› ä¸ºï¼š

- `rememberCoroutineScope()` **ä¸ä¼šè·Ÿéš Composable ç”Ÿå‘½å‘¨æœŸ**ï¼Œå®ƒå¯èƒ½å¯¼è‡´ **å†…å­˜æ³„æ¼** æˆ– **ä¸å¿…è¦çš„ä»»åŠ¡** ç»§ç»­æ‰§è¡Œã€‚
- `LaunchedEffect` ç»‘å®šåˆ° Composable **ç”Ÿå‘½å‘¨æœŸ**ï¼Œå¦‚æœ Composable **è¢«ç§»é™¤**ï¼Œå®ƒçš„ä»»åŠ¡ä¹Ÿä¼šè‡ªåŠ¨å–æ¶ˆã€‚

------

### **æœ€ç»ˆç»“è®º**

`LaunchedEffect(Unit)` + `delay(2000)` + `mutableStateOf(true)` è¿™ä¸€æ•´å¥—é€»è¾‘ä¿è¯ï¼š âœ… **å¯åŠ¨ç”»é¢åªæ˜¾ç¤º 2 ç§’**
âœ… **ä¸ä¼šé˜»å¡ UI**
âœ… **ä¸ä¼šå¯¼è‡´ä¸å¿…è¦çš„ä»»åŠ¡æ‰§è¡Œ**
âœ… **ä¸ä¼šå› ä¸º Recomposition é‡æ–°æ‰§è¡Œ**

**è¿™æ ·ä½ çš„åº”ç”¨å°±èƒ½åœ¨ 2 ç§’åï¼Œè‡ªåŠ¨ä»å¯åŠ¨ç”»é¢è¿‡æ¸¡åˆ°ä¸»ç•Œé¢ï¼** ğŸš€

byæ˜¯å§”æ‰˜ï¼š



### **ä»€ä¹ˆæ˜¯å§”æ‰˜ï¼ˆDelegationï¼‰ï¼Ÿ**

åœ¨ Kotlin ä¸­ï¼Œ**å§”æ‰˜ï¼ˆDelegationï¼‰** æ˜¯ä¸€ç§ **å°†æŸä¸ªå¯¹è±¡çš„è¡Œä¸ºå§”æ‰˜ç»™å¦ä¸€ä¸ªå¯¹è±¡** æ¥æ‰§è¡Œçš„è®¾è®¡æ¨¡å¼ã€‚è¿™æ ·å¯ä»¥ **å¤ç”¨ä»£ç **ï¼Œé¿å…ç»§æ‰¿å¸¦æ¥çš„å¤æ‚æ€§ï¼Œå¹¶æé«˜çµæ´»æ€§ã€‚

------

## **1. `by` å…³é”®å­—çš„ä½œç”¨**

Kotlin é€šè¿‡ `by` å…³é”®å­—æ¥ **ç®€åŒ–å§”æ‰˜**ï¼Œè®©ä¸€ä¸ªç±»æˆ–å±æ€§çš„æ“ä½œè½¬äº¤ç»™å¦ä¸€ä¸ªå¯¹è±¡æ¥æ‰§è¡Œã€‚

å§”æ‰˜ä¸»è¦æœ‰ **ä¸¤ç§æ–¹å¼**ï¼š

1. **å±æ€§å§”æ‰˜ï¼ˆProperty Delegationï¼‰**
2. **ç±»å§”æ‰˜ï¼ˆClass Delegationï¼‰**

------

## **2. å±æ€§å§”æ‰˜ï¼ˆProperty Delegationï¼‰**

å±æ€§å§”æ‰˜å…è®¸æˆ‘ä»¬ **æŠŠå±æ€§çš„ getterã€setter é€»è¾‘äº¤ç»™ä¸€ä¸ªå§”æ‰˜å¯¹è±¡æ¥ç®¡ç†**ã€‚

### **ğŸŒŸ ä¾‹å­ï¼šä½¿ç”¨ `by` å§”æ‰˜ `mutableStateOf`**

åœ¨ Jetpack Compose ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸è¿™æ ·å†™ï¼š

```
kotlin


å¤åˆ¶ç¼–è¾‘
var showSplash by remember { mutableStateOf(true) }
```

**ç­‰ä»·äºï¼š**

```
kotlinå¤åˆ¶ç¼–è¾‘val showSplashState = remember { mutableStateOf(true) }
var showSplash: Boolean
    get() = showSplashState.value
    set(value) { showSplashState.value = value }
```

ğŸ“Œ **åˆ†æï¼š**

- `mutableStateOf(true)` åˆ›å»ºäº†ä¸€ä¸ªçŠ¶æ€å¯¹è±¡ï¼Œå†…éƒ¨æœ‰ `value` å˜é‡ã€‚
- `by` **ä¼šè‡ªåŠ¨ä»£ç† `value`**ï¼Œè®© `showSplash` **å¯ä»¥åƒæ™®é€šå˜é‡ä¸€æ ·ç›´æ¥è¯»å†™**ã€‚
- è¿™æ ·å¯ä»¥çœå» `showSplashState.value` çš„å†™æ³•ï¼Œæ›´ç®€æ´ã€‚

------

### **ğŸŒŸ ä¾‹å­ï¼šä½¿ç”¨ `lazy` è¿›è¡Œå±æ€§å§”æ‰˜**

```
kotlinå¤åˆ¶ç¼–è¾‘val config: String by lazy {
    println("åˆå§‹åŒ– config")
    "App é…ç½®"
}

fun main() {
    println("ç¨‹åºå¯åŠ¨")
    println(config) // è¿™é‡Œæ‰ä¼šè§¦å‘åˆå§‹åŒ–
    println(config) // ç¬¬äºŒæ¬¡è®¿é—®ä¸ä¼šå†åˆå§‹åŒ–
}
```

ğŸ“Œ **åˆ†æï¼š**

- `lazy {}` åªæœ‰åœ¨ **ç¬¬ä¸€æ¬¡è®¿é—®** `config` æ—¶æ‰ä¼šæ‰§è¡Œï¼Œä¹‹åçš„è®¿é—®éƒ½ä¼šå¤ç”¨ç»“æœã€‚
- **ä¼˜ç‚¹**ï¼š**é¿å…ä¸å¿…è¦çš„åˆå§‹åŒ–ï¼Œæé«˜æ€§èƒ½**ã€‚

------

## **3. ç±»å§”æ‰˜ï¼ˆClass Delegationï¼‰**

å¦‚æœä¸€ä¸ªç±» **æƒ³è¦å®ç°æŸä¸ªæ¥å£çš„åŠŸèƒ½**ï¼Œä½†ä¸æƒ³è‡ªå·±å†™æ‰€æœ‰é€»è¾‘ï¼Œå¯ä»¥ **æŠŠæ¥å£çš„å®ç°å§”æ‰˜ç»™å¦ä¸€ä¸ªå¯¹è±¡**ã€‚

### **ğŸŒŸ ä¾‹å­ï¼šç”¨ `by` å®ç°ç±»å§”æ‰˜**

```
kotlinå¤åˆ¶ç¼–è¾‘interface Printer {
    fun printMessage()
}

// å…·ä½“å®ç°ç±»
class RealPrinter : Printer {
    override fun printMessage() {
        println("æ‰“å°æ¶ˆæ¯")
    }
}

// ä»£ç†ç±»ï¼Œå§”æ‰˜ RealPrinter å¤„ç†
class PrinterProxy(private val realPrinter: RealPrinter) : Printer {
    override fun printMessage() {
        println("ä»£ç†å¼€å§‹")
        realPrinter.printMessage() // å§”æ‰˜è°ƒç”¨
        println("ä»£ç†ç»“æŸ")
    }
}

// ä½¿ç”¨ç±»å§”æ‰˜çš„æ–¹å¼
class PrinterDelegate(realPrinter: Printer) : Printer by realPrinter

fun main() {
    val proxy = PrinterProxy(RealPrinter())
    proxy.printMessage()

    val delegate = PrinterDelegate(RealPrinter())
    delegate.printMessage() // ç›´æ¥è°ƒç”¨å§”æ‰˜å¯¹è±¡çš„æ–¹æ³•
}
```

ğŸ“Œ **åˆ†æï¼š**

1. **`RealPrinter`** æ˜¯ä¸€ä¸ªæ™®é€šçš„å®ç°ç±»ï¼ŒçœŸæ­£æ‰§è¡Œ `printMessage()` æ–¹æ³•ã€‚
2. **`PrinterProxy`** ç›´æ¥è°ƒç”¨ `realPrinter.printMessage()`ï¼Œç›¸å½“äº **æ‰‹åŠ¨ä»£ç†** ã€‚
3. **`PrinterDelegate` ä½¿ç”¨ `by` å§”æ‰˜**ï¼Œè‡ªåŠ¨æŠŠ `printMessage()` çš„å®ç°äº¤ç»™ `RealPrinter` å¤„ç†ï¼Œä»£ç æ›´ç®€æ´ã€‚

------

## **4. ä¸ºä»€ä¹ˆç”¨å§”æ‰˜ï¼Ÿ**

âœ… **å‡å°‘é‡å¤ä»£ç **ï¼ˆé¿å…æ‰‹å†™ getter/setterã€æ‰‹åŠ¨ä»£ç†ï¼‰
âœ… **æ›´çµæ´»**ï¼ˆå¯ä»¥åœ¨è¿è¡Œæ—¶æ›´æ”¹å§”æ‰˜å¯¹è±¡ï¼‰
âœ… **æ¯”ç»§æ‰¿æ›´å¥½**ï¼ˆé¿å…ç»§æ‰¿å¯¼è‡´çš„ä»£ç è†¨èƒ€ï¼Œæé«˜å¯ç»´æŠ¤æ€§ï¼‰

------

## **5. æ€»ç»“**

| å§”æ‰˜æ–¹å¼     | ç”¨æ³•                    | ä½œç”¨                                        |
| ------------ | ----------------------- | ------------------------------------------- |
| **å±æ€§å§”æ‰˜** | `var x by lazy { ... }` | è®©å±æ€§çš„ `getter/setter` é€»è¾‘ç”±å§”æ‰˜å¯¹è±¡å¤„ç† |
| **ç±»å§”æ‰˜**   | `class A: B by C()`     | è®©ç±»çš„è¡Œä¸ºäº¤ç»™å¦ä¸€ä¸ªå¯¹è±¡                    |

ğŸš€ **åœ¨ Compose é‡Œï¼ŒçŠ¶æ€ç®¡ç†å¸¸ç”¨ `by` å§”æ‰˜ `mutableStateOf`ï¼Œè®©çŠ¶æ€å˜é‡æ›´ç®€æ´ï¼**

---------


ç»§ç»­ï¼š

### **ä»£ç æ‹†è§£**

```
kotlinå¤åˆ¶ç¼–è¾‘if (showSplash) {
    SplashScreen() // æ˜¾ç¤ºå¯åŠ¨ç”»é¢
} else {
    Scaffold(
        bottomBar = { BottomNavigationBar(navController) } // åº•éƒ¨å¯¼èˆªæ 
    ) { paddingValues ->
        NavHost(
            navController = navController, // å¯¼èˆªæ§åˆ¶å™¨
            startDestination = "home", // å¯åŠ¨æ—¶é»˜è®¤æ˜¾ç¤º "home" é¡µé¢
            modifier = Modifier.padding(paddingValues) // è®¾ç½®å†…å®¹çš„ padding
        ) {
            composable("home") { HomeScreen(navController) } // å®šä¹‰ "home" é¡µé¢
            composable("function") { FunctionScreen() } // å®šä¹‰ "function" é¡µé¢
            composable("mine") { MineScreen() } // å®šä¹‰ "mine" é¡µé¢
            composable("camera") { CameraScreen(navController) } // æ·»åŠ  "camera" é¡µé¢ï¼Œä½†ä¸åœ¨åº•éƒ¨å¯¼èˆªæ ä¸­
            composable("todo") { ToDoScreen(navController) } // æ·»åŠ  "ToDo" é¡µé¢ï¼Œä½†ä¸åœ¨åº•éƒ¨å¯¼èˆªæ ä¸­
        }
    }
}
```

------

## **è¯¦ç»†è§£é‡Š**

### **1ï¸âƒ£ `if (showSplash) { SplashScreen() }`**

- **`showSplash` æ˜¯ä¸€ä¸ªçŠ¶æ€å˜é‡**ï¼Œç”¨äºæ§åˆ¶æ˜¯å¦æ˜¾ç¤ºå¯åŠ¨ç”»é¢ã€‚
- å¦‚æœ `showSplash == true`ï¼Œå°±ä¼š **æ˜¾ç¤º `SplashScreen()`**ï¼Œå…¶ä»–å†…å®¹ä¸ä¼šæ¸²æŸ“ã€‚

### **2ï¸âƒ£ `else { Scaffold(...) }`**

å¦‚æœ `showSplash == false`ï¼Œåˆ™ **æ˜¾ç¤ºä¸»ç•Œé¢**ï¼Œä¸»ç•Œé¢åŒ…å«ï¼š

1. **åº•éƒ¨å¯¼èˆªæ **ï¼ˆ`BottomNavigationBar`ï¼‰ã€‚
2. **é¡µé¢å†…å®¹**ï¼ˆ`NavHost` æ§åˆ¶çš„é¡µé¢åˆ‡æ¢ï¼‰ã€‚

------

### **3ï¸âƒ£ `Scaffold` ç»„ä»¶**

```
kotlinå¤åˆ¶ç¼–è¾‘Scaffold(
    bottomBar = { BottomNavigationBar(navController) } // åº•éƒ¨å¯¼èˆªæ 
)
```

- `Scaffold` æ˜¯ **Material è®¾è®¡çš„åŸºç¡€å¸ƒå±€**ï¼Œå¯ä»¥æ–¹ä¾¿åœ°æ·»åŠ  **åº•éƒ¨å¯¼èˆªæ ã€é¡¶éƒ¨ AppBarã€FAB æŒ‰é’®ç­‰ UI ç»„ä»¶**ã€‚

- ```
  bottomBar = { BottomNavigationBar(navController) }
  ```

  - è¿™é‡Œä¼ å…¥ `BottomNavigationBar(navController)`ï¼Œå³ **åº•éƒ¨å¯¼èˆªæ **ã€‚
  - è¿™ä¸ªåº•éƒ¨å¯¼èˆªæ  **ä¸åŒ…å« `camera` å’Œ `todo` é¡µé¢**ï¼Œå®ƒä»¬ä¸ä¼šæ˜¾ç¤ºåœ¨åº•éƒ¨èœå•é‡Œã€‚

------

### **4ï¸âƒ£ `NavHost` ç»„ä»¶**

```
kotlinå¤åˆ¶ç¼–è¾‘NavHost(
    navController = navController, // å¯¼èˆªæ§åˆ¶å™¨
    startDestination = "home", // é»˜è®¤å¯åŠ¨ "home" é¡µé¢
    modifier = Modifier.padding(paddingValues) // ç¡®ä¿å†…å®¹ä¸ä¼šè¢«åº•éƒ¨å¯¼èˆªæ é®æŒ¡
)
```

- `NavHost` æ˜¯ **Jetpack Compose çš„å¯¼èˆªå®¹å™¨**ï¼Œç”¨æ¥æ§åˆ¶é¡µé¢åˆ‡æ¢ã€‚

- **`navController`** è´Ÿè´£ç®¡ç† **å½“å‰æ˜¾ç¤ºçš„é¡µé¢**ï¼Œä»¥åŠé¡µé¢çš„è·³è½¬ã€‚

- **`startDestination = "home"`** è®¾ç½® **é»˜è®¤å¯åŠ¨çš„é¡µé¢æ˜¯ "home"**ã€‚

- ```
  modifier = Modifier.padding(paddingValues)
  ```

  ï¼š

  - è¿™æ˜¯ä¸ºäº† **é€‚é…åº•éƒ¨å¯¼èˆªæ **ï¼Œé¿å…å†…å®¹è¢«åº•éƒ¨å¯¼èˆªæ æŒ¡ä½ã€‚

------

### **5ï¸âƒ£ `composable()` å®šä¹‰å¯¼èˆªé¡µé¢**

```
kotlinå¤åˆ¶ç¼–è¾‘composable("home") { HomeScreen(navController) } // å®šä¹‰ "home" é¡µé¢
composable("function") { FunctionScreen() } // å®šä¹‰ "function" é¡µé¢
composable("mine") { MineScreen() } // å®šä¹‰ "mine" é¡µé¢
composable("camera") { CameraScreen(navController) } // æ·»åŠ  "camera" é¡µé¢ï¼Œä½†ä¸åœ¨åº•éƒ¨å¯¼èˆªæ ä¸­
composable("todo") { ToDoScreen(navController) } // æ·»åŠ  "ToDo" é¡µé¢ï¼Œä½†ä¸åœ¨åº•éƒ¨å¯¼èˆªæ ä¸­
```

- `composable(route) { é¡µé¢ }` ç”¨äº **æ³¨å†Œå¯å¯¼èˆªçš„é¡µé¢**ã€‚
- `"home"`, `"function"`, `"mine"` æ˜¯åº•éƒ¨å¯¼èˆªæ çš„é¡µé¢ã€‚
- `"camera"` å’Œ `"todo"` **æ²¡æœ‰æ·»åŠ åˆ°åº•éƒ¨å¯¼èˆªæ **ï¼Œä½†ä»ç„¶å¯ä»¥é€šè¿‡ `navController.navigate("camera")` è¿›è¡Œè·³è½¬ã€‚

------

### **6ï¸âƒ£ `camera` å’Œ `todo` é¡µé¢ä¸ä¼šå‡ºç°åœ¨åº•éƒ¨å¯¼èˆªæ **

å°½ç®¡ `"camera"` å’Œ `"todo"` åœ¨ `NavHost` ä¸­æ³¨å†Œäº†ï¼š

```
kotlinå¤åˆ¶ç¼–è¾‘composable("camera") { CameraScreen(navController) }
composable("todo") { ToDoScreen(navController) }
```

**ä½† `BottomNavigationBar` æ²¡æœ‰å®šä¹‰è¿™ä¸¤ä¸ªé€‰é¡¹**ï¼Œæ‰€ä»¥ï¼š

1. **å®ƒä»¬ä¸ä¼šæ˜¾ç¤ºåœ¨åº•éƒ¨å¯¼èˆªæ ä¸­**ã€‚
2. åªèƒ½é€šè¿‡ `navController.navigate("camera")` è¿›è¡Œè·³è½¬ã€‚

------

## **æœ€ç»ˆæ•ˆæœ**

ğŸ”¹ **å¯åŠ¨æ—¶ï¼Œå…ˆæ˜¾ç¤º `SplashScreen()`ï¼Œ2 ç§’ååˆ‡æ¢åˆ° `HomeScreen()`**ã€‚
ğŸ”¹ **åº•éƒ¨å¯¼èˆªæ åŒ…å« `"home"`ã€`"function"` å’Œ `"mine"` é¡µé¢**ã€‚
ğŸ”¹ **"camera" å’Œ "todo" é¡µé¢å¯ä»¥è·³è½¬è®¿é—®ï¼Œä½†ä¸åœ¨åº•éƒ¨å¯¼èˆªæ é‡Œ**ã€‚

ğŸ“Œ **ä»£ç é€»è¾‘æ¸…æ™°ã€ç¬¦åˆ Material è®¾è®¡è§„èŒƒï¼Œå¹¶ä¸”åˆç†åœ°å¤„ç†äº†é¡µé¢å¯¼èˆªï¼** ğŸš€









-----------

## **ä»£ç æ‹†è§£ä¸è§£æ**

### **1. `sealed class BottomNavItem`ï¼ˆå®šä¹‰å¯¼èˆªé¡¹ï¼‰**

```
kotlinå¤åˆ¶ç¼–è¾‘sealed class BottomNavItem(val route: String, val icon: ImageVector, val label: String) {
    object Home : BottomNavItem("home", Icons.Filled.Home, "Home")
    object Function : BottomNavItem("function", Icons.Filled.Build, "Function")
    object Mine : BottomNavItem("mine", Icons.Filled.Person, "Mine")
}
```

#### **ğŸ”¹ æ‹†è§£**

- è¿™é‡Œå®šä¹‰äº†ä¸€ä¸ª **å¯†å°ç±»ï¼ˆ`sealed class`ï¼‰`BottomNavItem`**ï¼Œç”¨äºè¡¨ç¤º **åº•éƒ¨å¯¼èˆªæ çš„èœå•é¡¹**ã€‚

- ```
  BottomNavItem
  ```

  æœ‰ 3 ä¸ªå‚æ•°

  ï¼š

  - `route: String` â†’ è¯¥å¯¼èˆªé¡¹çš„ **è·¯ç”±åç§°**ï¼Œç”¨äº `NavController.navigate(route)` è¿›è¡Œé¡µé¢è·³è½¬ã€‚
  - `icon: ImageVector` â†’ è¯¥å¯¼èˆªé¡¹çš„ **å›¾æ ‡**ï¼Œä½¿ç”¨ `Icons.Filled` æä¾›çš„ Material Design å›¾æ ‡ã€‚
  - `label: String` â†’ è¯¥å¯¼èˆªé¡¹çš„ **æ–‡æœ¬æ ‡ç­¾**ï¼Œæ˜¾ç¤ºåœ¨å›¾æ ‡ä¸‹æ–¹ã€‚

#### **ğŸ”¹ å…·ä½“å®ç°**

- ```
  sealed class
  ```

   å…è®¸åˆ›å»º 

  å¤šä¸ªå…·ä½“çš„ `object` å­ç±»

  ï¼Œå³ï¼š

  - `Home` â†’ `"home"`ï¼Œå›¾æ ‡æ˜¯ `Icons.Filled.Home`ï¼Œæ ‡ç­¾ `"Home"`
  - `Function` â†’ `"function"`ï¼Œå›¾æ ‡æ˜¯ `Icons.Filled.Build`ï¼Œæ ‡ç­¾ `"Function"`
  - `Mine` â†’ `"mine"`ï¼Œå›¾æ ‡æ˜¯ `Icons.Filled.Person`ï¼Œæ ‡ç­¾ `"Mine"`

ğŸ“Œ **å¯†å°ç±»çš„ä½œç”¨**ï¼š

- é™åˆ¶ `BottomNavItem` åªèƒ½æœ‰å›ºå®šçš„å‡ ä¸ªå­ç±»ï¼ˆ`Home`ã€`Function`ã€`Mine`ï¼‰ã€‚
- ç¡®ä¿ **ä¸ä¼šæœ‰å…¶ä»–éæ³•çš„å¯¼èˆªé¡¹**ï¼Œæ¯”æ™®é€š `class` æ›´å®‰å…¨ã€‚

------

### **2. `BottomNavigationBar`ï¼ˆåº•éƒ¨å¯¼èˆªæ ç»„ä»¶ï¼‰**

```
kotlinå¤åˆ¶ç¼–è¾‘@Composable
fun BottomNavigationBar(navController: NavController) {
    val items = listOf(BottomNavItem.Home, BottomNavItem.Function, BottomNavItem.Mine)

    NavigationBar {
        val navBackStackEntry by navController.currentBackStackEntryAsState()
        val currentRoute = navBackStackEntry?.destination?.route

        items.forEach { item ->
            NavigationBarItem(
                icon = { Icon(item.icon, contentDescription = item.label) },
                label = { Text(item.label) },
                selected = currentRoute == item.route,
                onClick = { navController.navigate(item.route) }
            )
        }
    }
}
```

#### **ğŸ”¹ æ‹†è§£**

è¿™ä¸ªå‡½æ•°å®šä¹‰äº† **åº•éƒ¨å¯¼èˆªæ **ï¼Œå¹¶åŠ¨æ€æ¸²æŸ“ `BottomNavItem` é‡Œé¢å®šä¹‰çš„å¯¼èˆªé¡¹ã€‚

------

### **3. `val items = listOf(...)`ï¼ˆå®šä¹‰å¯¼èˆªé¡¹åˆ—è¡¨ï¼‰**

```
kotlin


å¤åˆ¶ç¼–è¾‘
val items = listOf(BottomNavItem.Home, BottomNavItem.Function, BottomNavItem.Mine)
```

- è¿™é‡Œåˆ›å»ºäº†ä¸€ä¸ª **åˆ—è¡¨**ï¼ŒåŒ…å« `BottomNavItem` é‡Œçš„ 3 ä¸ªå¯¼èˆªé¡¹ã€‚
- è¿™æ„å‘³ç€ **åº•éƒ¨å¯¼èˆªæ åªæœ‰ `home`ã€`function` å’Œ `mine` è¿™ 3 ä¸ªé€‰é¡¹**ã€‚

------

### **4. `NavigationBar { ... }`ï¼ˆåˆ›å»ºåº•éƒ¨å¯¼èˆªæ ï¼‰**

```
kotlinå¤åˆ¶ç¼–è¾‘NavigationBar {
    val navBackStackEntry by navController.currentBackStackEntryAsState()
    val currentRoute = navBackStackEntry?.destination?.route
```

#### **ğŸ“Œ è§£æ**

- `NavigationBar` æ˜¯ **Material 3** çš„ **åº•éƒ¨å¯¼èˆªæ ç»„ä»¶**ã€‚

- è·å–å½“å‰é¡µé¢è·¯ç”±

  ï¼š

  - `navController.currentBackStackEntryAsState()` â†’ ç›‘å¬ `NavController` çš„å¯¼èˆªçŠ¶æ€ã€‚
  - `val currentRoute = navBackStackEntry?.destination?.route` â†’ è·å–å½“å‰é¡µé¢çš„è·¯ç”±åç§°ã€‚

ğŸ“Œ **ä½œç”¨**ï¼šç”¨äº **åˆ¤æ–­å½“å‰é€‰ä¸­çš„å¯¼èˆªé¡¹**ï¼Œä»è€Œé«˜äº®æ˜¾ç¤ºå®ƒã€‚

------

### **5. `forEach` éå† `items` å¹¶åˆ›å»º `NavigationBarItem`**

```
kotlinå¤åˆ¶ç¼–è¾‘items.forEach { item ->
    NavigationBarItem(
        icon = { Icon(item.icon, contentDescription = item.label) },
        label = { Text(item.label) },
        selected = currentRoute == item.route,
        onClick = { navController.navigate(item.route) }
    )
}
```

#### **ğŸ“Œ è§£æ**

- éå† `items`ï¼ˆå³ `Home`ã€`Function`ã€`Mine`ï¼‰ã€‚

- ä¸ºæ¯ä¸ª `BottomNavItem` åˆ›å»º `NavigationBarItem`

  ï¼š

  - `icon = { Icon(item.icon, contentDescription = item.label) }` â†’ **è®¾ç½®å¯¼èˆªå›¾æ ‡**ã€‚
  - `label = { Text(item.label) }` â†’ **è®¾ç½®æ–‡æœ¬æ ‡ç­¾**ã€‚
  - `selected = currentRoute == item.route` â†’ **å¦‚æœå½“å‰é¡µé¢åŒ¹é…è¯¥å¯¼èˆªé¡¹çš„ `route`ï¼Œåˆ™é«˜äº®é€‰ä¸­**ã€‚
  - `onClick = { navController.navigate(item.route) }` â†’ **ç‚¹å‡»è¯¥å¯¼èˆªé¡¹æ—¶ï¼Œè·³è½¬åˆ°å¯¹åº”é¡µé¢**ã€‚

ğŸ“Œ **ç‚¹å‡»å¯¼èˆªé¡¹çš„é€»è¾‘**ï¼š

- `navController.navigate(item.route)` è®© `NavController` è·³è½¬åˆ° **å¯¹åº”çš„ `route` é¡µé¢**ã€‚

------

## **ğŸ”¹ ä»£ç æ‰§è¡Œæµç¨‹**

1. `BottomNavigationBar` ç»„ä»¶æ¸²æŸ“ **åº•éƒ¨å¯¼èˆªæ **ã€‚

2. è·å–å½“å‰å¯¼èˆªçŠ¶æ€

   ï¼š

   - `currentRoute = navBackStackEntry?.destination?.route`
   - ç”¨äºé«˜äº® **å½“å‰é€‰ä¸­çš„å¯¼èˆªé¡¹**ã€‚

3. éå† `BottomNavItem` é‡Œçš„ `Home`ã€`Function`ã€`Mine`

   ï¼š

   - `NavigationBarItem` **æ¸²æŸ“å›¾æ ‡å’Œæ–‡æœ¬**ã€‚
   - å¦‚æœ `currentRoute == item.route`ï¼Œåˆ™ **é«˜äº®è¯¥æŒ‰é’®**ã€‚
   - ç‚¹å‡»åè§¦å‘ `navController.navigate(item.route)`ï¼Œè·³è½¬åˆ°æ–°é¡µé¢ã€‚

------

## **ğŸ”¹ ä»£ç æ‰§è¡Œæ•ˆæœ**

âœ… **åº•éƒ¨å¯¼èˆªæ æ˜¾ç¤º `Home`ã€`Function`ã€`Mine` ä¸‰ä¸ªæŒ‰é’®**ã€‚
âœ… **ç‚¹å‡»ä¸åŒæŒ‰é’®ï¼Œé¡µé¢åˆ‡æ¢ï¼Œä¸”å½“å‰æŒ‰é’®é«˜äº®**ã€‚
âœ… **`camera` å’Œ `todo` ä¸ä¼šå‡ºç°åœ¨åº•éƒ¨å¯¼èˆªæ é‡Œ**ï¼Œä½†ä»ç„¶å¯ä»¥ç”¨ `navController.navigate("camera")` è¿›è¡Œè·³è½¬ã€‚

------

## **ğŸ“Œ ç»“è®º**

- `BottomNavItem` **å®šä¹‰äº†å›ºå®šçš„å¯¼èˆªé¡¹**ï¼Œç¡®ä¿å®‰å…¨æ€§ã€‚
- `BottomNavigationBar` **éå† `BottomNavItem` å¹¶æ¸²æŸ“åº•éƒ¨å¯¼èˆªæ **ã€‚
- é€šè¿‡ `navController.currentBackStackEntryAsState()` **ç›‘å¬å½“å‰é€‰ä¸­çš„é¡µé¢**ï¼Œå®ç° **æŒ‰é’®é«˜äº®**ã€‚
- ç‚¹å‡» `NavigationBarItem` æ—¶ï¼Œ`navController.navigate(item.route)` **è·³è½¬é¡µé¢**ã€‚

ğŸš€ **è¿™ä¸ªç»“æ„æ¸…æ™°ã€çµæ´»ï¼Œå¯ç»´æŠ¤æ€§å¼ºï¼**







